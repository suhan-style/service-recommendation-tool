<!DOCTYPE html>
<html lang="en">
<head>
   <title>ICICI Development Project</title>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta http-equiv='cache-control' content='no-cache'>
    <meta http-equiv='expires' content='0'>
    <meta http-equiv='pragma' content='no-cache'>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
   <div class="container-fluid">
      <div class="row">
         <div class="col-12">
            <div class="logo">
               <img src="images/LOGO.png" alt="logo" />
            </div>
         </div>
      </div>
      <div class="row">
         <div class="col-12 px-0">
            <img src="images/GC_ICICI_Canada_Banner.jpg" alt="Banner" class="img-fluid w-100" />
         </div>
      </div>
   </div>
   <div id="APRT" class="container-fluid bg-light-gray">
      <div class="row pt-4">
         <div class="col-12">
            <div class="bg-red pd-left">
               <h1 class="text-white">Appropriate Product Recommendation Tool</h1>
            </div>
         </div>
      </div>

      <div class="row">
         <div class="col-12">
            <div class="pd-left py-3">
               <div class="form-check">
                  <input class="form-check-input" type="radio" name="flexRadioDefault" id="radioPage1" checked>
                  <label class="form-check-label" for="radioPage1">
                      I want to Save in GIC/Savings/Registered Product
                  </label>
               </div>
            </div>
         </div>
      </div>

      <!-- Question 1 -->
      <div class="row pb-5">
         <div class="col-12">
            <div class="bg-orange pd-left mb-3">
               <h4 class="bold text-white d-flex-column-gap">
                  <span>1.</span>
                  <span>Which Option Best Describes You? <span class="font-normal">Select any/all that apply to you:</span></span>
               </h4>
            </div>
            
            <div class="pd-left">
               <div class="form-check">
                  <input class="form-check-input d" type="radio" name="question_1" id="Q1_option1">
                  <label class="form-check-label" for="Q1_option1">
                     I'm a Student
                  </label>
               </div>
               <div class="form-check">
                  <input class="form-check-input d e" type="radio" name="question_1" id="Q1_option2">
                  <label class="form-check-label" for="Q1_option2">
                      I'm new to Canada (on PR/Work Permit)
                  </label>
               </div>
               <div class="form-check">
                  <input class="form-check-input d e f g h i j k" type="radio" name="question_1" id="Q1_option4">
                  <label class="form-check-label" for="Q1_option4">
                      Neither of the above
                  </label>
               </div>
            </div>
         </div>
      </div>

      <!-- Question 2 -->
      <div class="row pb-5">
         <div class="col-12">
            <div class="bg-orange pd-left mb-3">
               <h4 class="bold text-white d-flex-column-gap">
                  <span>2.</span>
                  <span>What do you need to save for? <span class="font-normal">Select any/all that apply to you:</span></span>
               </h4>
            </div>
            
            <div class="pd-left">
               <div class="form-check">
                  <input class="form-check-input d e" type="checkbox" name="question_2" id="Q2_option1">
                  <label class="form-check-label" for="Q2_option1">
                     Regular Savings to meet future life goals
                  </label>
               </div>
               <div class="form-check">
                  <input class="form-check-input f g" type="checkbox" name="question_2" id="Q2_option2">
                  <label class="form-check-label" for="Q2_option2">
                     Save for Fixed Period and Earn Interest
                  </label>
               </div>
               <div class="form-check">
                  <input class="form-check-input h i" type="checkbox" name="question_2" id="Q2_option3">
                  <label class="form-check-label" for="Q2_option3">
                     Tax Saving Purpose
                  </label>
               </div>
               <div class="form-check">
                  <input class="form-check-input j k" type="checkbox" name="question_2" id="Q2_option4">
                  <label class="form-check-label" for="Q2_option4">
                     Save for Retirement
                  </label>
               </div>
            </div>
         </div>
      </div>

      <!-- Question 3 -->
      <div class="row pb-5">
         <div class="col-12">
            <div class="bg-orange pd-left mb-3">
               <h4 class="bold text-white d-flex-column-gap">
                  <span>3.</span>
                  <span>Would you need to withdraw funds from your Investments (GIC/TD) before it matures? <span class="font-normal">(Select any one)</span></span>
               </h4>
            </div>
            
            <div class="pd-left">
               <div class="form-check">
                  <input class="form-check-input f h i" type="radio" name="question_3" id="Q3_option1">
                  <label class="form-check-label" for="Q3_option1">
                     Yes
                  </label>
               </div>
               <div class="form-check">
                  <input class="form-check-input g j k" type="radio" name="question_3" id="Q3_option2">
                  <label class="form-check-label" for="Q3_option2">
                      No
                  </label>
               </div>
            </div>
         </div>
      </div>

      <!-- Submit Button -->
      <div class="row pb-5">
         <div class="col-12">
            <div class="pd-left mb-3">
               <button type="button" class="btn btn-primary bold" id="btnSubmit">SUBMIT</button>
            </div>
         </div>
      </div>

      <div class="row">
         <div class="wrapper">
            <div><span>HiSAVE Savings : </span><span class="hisave_savings">0</span></div>
            <div><span>Premium Savings : </span><span class="premium_savings">0</span></div>
            <div><span>Redeemable GIC & Term Deposit : </span><span class="redeemable_gic_term_deposit">0</span></div>
            <div><span>Non Redeemable GIC & Term Deposit : </span><span class="non_redeemable_gic_and_term_deposit">0</span></div>
            <div><span>Tax Free Savings : </span><span class="tax_free_savings">0</span></div>
            <div><span>Tax Free GIC : </span><span class="tax_free_gic">0</span></div>
            <div><span>RSP Savings : </span><span class="rsp_savings">0</span></div>
            <div><span>RSP GIC : </span><span class="rsp_gic">0</span></div>
            <div><span>Greater Value : </span><span class="greater-value"></span></div>
         </div>
      </div>
   </div>

   <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
   <script>
      jQuery(function($) {
         $('#btnSubmit').click(function() {
            var hisave_savings = $('.form-check-input:checked').filter('.d').length;
            $('.hisave_savings').html(hisave_savings);

            var premium_savings = $('.form-check-input:checked').filter('.e').length;
            $('.premium_savings').html(premium_savings);

            var redeemable_gic_term_deposit = $('.form-check-input:checked').filter('.f').length;
            $('.redeemable_gic_term_deposit').html(redeemable_gic_term_deposit);

            var non_redeemable_gic_and_term_deposit = $('.form-check-input:checked').filter('.g').length;
            $('.non_redeemable_gic_and_term_deposit').html(non_redeemable_gic_and_term_deposit);

            var tax_free_savings = $('.form-check-input:checked').filter('.h').length;
            $('.tax_free_savings').html(tax_free_savings);

            var tax_free_gic = $('.form-check-input:checked').filter('.i').length;
            $('.tax_free_gic').html(tax_free_gic);

            var rsp_savings = $('.form-check-input:checked').filter('.j').length;
            $('.rsp_savings').html(rsp_savings);

            var rsp_gic = $('.form-check-input:checked').filter('.k').length;
            $('.rsp_gic').html(rsp_gic);


            // It will return KEY of Greater Value
            var obj = {
               'HiSAVE Savings' : hisave_savings,
               'Premium Savings' : premium_savings,
               'Redeemable GIC and Term Deposit' : redeemable_gic_term_deposit,
               'Non Redeemable GIC and Term Deposit' : non_redeemable_gic_and_term_deposit,
               'Tax Free Savings' : tax_free_savings,
               'Tax Free GIC' : tax_free_gic,
               'RSP Savings' : rsp_savings,
               'RSP GIC' : rsp_gic
            };

            // const greater_key = Object.keys(obj).reduce((a, b) => obj[a] > obj[b] ? a : b);
            // $('.greater-value').html(greater_key);

            let arr = Object.values(obj);
            let max = Math.max(...arr);
            // console.log('Max value is: ' + max);

            function getKey(obj){
              const arr = [],
              storevalue = Object.keys(obj);
              for (var x in storevalue){
                if(obj[storevalue[x]] === max){
                  arr.push(storevalue[x]);
                }
              }
              return arr;
            }

            // console.log(getKey(obj).join("&"));
            $('.greater-value').html(getKey(obj).join(", "));

            var key = getKey(obj).join("&");

            const param = key.replace(/ /g, '_');

            // response redirect
            setTimeout(function() {
               window.location.href = `response.html?${param.toLowerCase()}`;
            },2000);
         });
      });

   </script>
   <script src="js/script.js"></script>
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
</body>
</html>